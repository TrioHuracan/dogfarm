<!DOCTYPE html>
<html lang="th" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏£‡∏∏‡∏õ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { display: flex; min-height: 100vh; }
        .sidebar { min-width: 250px; max-width: 250px; background-color: #f8f9fa; }
        .content { flex-grow: 1; }
        .positive { color: green; }
        .negative { color: red; }
    </style>
</head>
<body>
    <div class="sidebar p-3">
        <h4>‡πÄ‡∏°‡∏ô‡∏π‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</h4>
        <hr>
        <ul class="nav nav-pills flex-column">
            <li class="nav-item"><a th:href="@{/admin/dashboard}" class="nav-link">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏ô‡∏±‡∏Ç</a></li>
            <li class="nav-item"><a th:href="@{/admin/reports}" class="nav-link active">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</a></li>
        </ul>
    </div>

    <main class="content p-4">
        <h1>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢</h1>
        <hr>
        <form th:action="@{/admin/reports}" method="get" class="row g-3 align-items-center mb-4 p-3 bg-light rounded">
            <div class="col-auto">
                <label for="month" class="form-label">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô:</label>
                <select id="month" name="month" class="form-select">
                    <option th:each="m : ${#numbers.sequence(1, 12)}"
                            th:value="${m}"
                            th:text="${T(java.time.Month).of(m).getDisplayName(T(java.time.format.TextStyle).FULL, T(java.util.Locale).forLanguageTag('th'))}"
                            th:selected="${m == selectedMonth}">
                    </option>
                </select>
            </div>
            <div class="col-auto">
                <label for="year" class="form-label">‡∏õ‡∏µ:</label>
                <select id="year" name="year" class="form-select">
                     <option th:each="y : ${#numbers.sequence(2023, 2025)}"
                             th:value="${y}"
                             th:text="${y + 543}"
                             th:selected="${y == selectedYear}">
                     </option>
                </select>
            </div>
            <div class="col-auto">
                <button type="submit" class="btn btn-primary mt-4">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</button>
            </div>
        </form>

        <div class="row">
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">üí∞ ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</h5>
                        <h2 class="card-text" th:text="${#numbers.formatDecimal(reportData.currentMonthRevenue, 1, 'COMMA', 2, 'POINT')} + ' ‡∏ö‡∏≤‡∏ó'"></h2>
                        <p class="card-text">
                            <small class="text-muted">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô: <span th:text="${#numbers.formatDecimal(reportData.previousMonthRevenue, 1, 'COMMA', 2, 'POINT')}"></span> ‡∏ö‡∏≤‡∏ó</small>
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">üêï ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ</h5>
                        <h2 class="card-text" th:text="${reportData.currentMonthCount} + ' ‡∏ï‡∏±‡∏ß'"></h2>
                        <p class="card-text">
                            <small class="text-muted">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô: <span th:text="${reportData.previousMonthCount}"></span> ‡∏ï‡∏±‡∏ß</small>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <h4>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô <span th:text="${T(java.time.Month).of(selectedMonth).getDisplayName(T(java.time.format.TextStyle).FULL, T(java.util.Locale).forLanguageTag('th'))}"></span></h4>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢</th>
                    <th>‡∏™‡∏≤‡∏¢‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå</th>
                    <th>‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)</th>
                </tr>
            </thead>
            <tbody>
                 <tr th:each="sale : ${reportData.salesList}">
                    <td th:text="${#temporals.format(sale.saleDate, 'dd MMMM yyyy', T(java.util.Locale).forLanguageTag('th'))}"></td>
                    <td th:text="${sale.dogBreed}"></td>
                    <td th:text="${#numbers.formatDecimal(sale.salePrice, 1, 'COMMA', 2, 'POINT')}"></td>
                </tr>
                <tr th:if="${#lists.isEmpty(reportData.salesList)}">
                    <td colspan="3" class="text-center">-- ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡πÉ‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ --</td>
                </tr>
            </tbody>
        </table>

    </main>
</body>
</html>